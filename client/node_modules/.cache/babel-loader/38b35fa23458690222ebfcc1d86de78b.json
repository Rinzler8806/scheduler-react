{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/shane/Desktop/scheduler-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/shane/Desktop/scheduler-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/shane/Desktop/scheduler-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable import/no-anonymous-default-export */import React,{useRef,useState}from'react';import FullCalendar from'@fullcalendar/react';// must go before plugins\nimport dayGridPlugin from'@fullcalendar/daygrid';// a plugin!\nimport AddEventModal from'./AddEventModal';import axios from\"axios\";import moment from'moment';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),modalOpen=_useState2[0],setModalOpen=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),events=_useState4[0],setEvents=_useState4[1];var calendarRef=useRef(null);var _onEventAdded=function onEventAdded(event){var calendarApi=calendarRef.current.getApi();calendarApi.addEvent({start:moment(event.start).toDate(),end:moment(event.end).toDate(),title:event.title});};function handleEventAdd(_x){return _handleEventAdd.apply(this,arguments);}function _handleEventAdd(){_handleEventAdd=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(\"/api/calendar/create-event\",data.event);case 2:case\"end\":return _context.stop();}}},_callee);}));return _handleEventAdd.apply(this,arguments);}function handleDatesSet(_x2){return _handleDatesSet.apply(this,arguments);}function _handleDatesSet(){_handleDatesSet=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(\"/api/calendar/get-events?start=\"+moment(data.start).toISOString()+\"&end=\"+moment(data.end).toISOString());case 2:response=_context2.sent;setEvents(response.data);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _handleDatesSet.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setModalOpen(true);},children:\"Add Event\"}),/*#__PURE__*/_jsx(\"div\",{style:{position:\"relative\",zIndex:0},children:/*#__PURE__*/_jsx(FullCalendar,{ref:calendarRef,events:events,plugins:[dayGridPlugin],initialView:\"dayGridMonth\",eventAdd:function eventAdd(event){return handleEventAdd(event);},datesSet:function datesSet(date){return handleDatesSet(date);}})}),/*#__PURE__*/_jsx(AddEventModal,{isOpen:modalOpen,onClose:function onClose(){return setModalOpen(false);},onEventAdded:function onEventAdded(event){return _onEventAdded(event);}})]});}","map":{"version":3,"sources":["C:/Users/shane/desktop/scheduler-react/client/src/Components/Calendar.jsx"],"names":["React","useRef","useState","FullCalendar","dayGridPlugin","AddEventModal","axios","moment","modalOpen","setModalOpen","events","setEvents","calendarRef","onEventAdded","event","calendarApi","current","getApi","addEvent","start","toDate","end","title","handleEventAdd","data","post","handleDatesSet","get","toISOString","response","position","zIndex","date"],"mappings":"yeAAA,uDACA,MAAOA,CAAAA,KAAP,EAAgBC,MAAhB,CAAwBC,QAAxB,KAAwC,OAAxC,CACA,MAAOC,CAAAA,YAAP,KAAyB,qBAAzB,CAAgD;AAChD,MAAOC,CAAAA,aAAP,KAA0B,uBAA1B,CAAmD;AACnD,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,C,wFAEA,cAAe,WAAY,CACvB,cAAkCL,QAAQ,CAAC,KAAD,CAA1C,wCAAOM,SAAP,eAAkBC,YAAlB,eACA,eAA4BP,QAAQ,CAAC,EAAD,CAApC,yCAAOQ,MAAP,eAAeC,SAAf,eACA,GAAMC,CAAAA,WAAW,CAAGX,MAAM,CAAC,IAAD,CAA1B,CAEA,GAAMY,CAAAA,aAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAC,KAAK,CAAI,CAC1B,GAAIC,CAAAA,WAAW,CAAGH,WAAW,CAACI,OAAZ,CAAoBC,MAApB,EAAlB,CACAF,WAAW,CAACG,QAAZ,CAAqB,CACjBC,KAAK,CAAEZ,MAAM,CAACO,KAAK,CAACK,KAAP,CAAN,CAAoBC,MAApB,EADU,CAEjBC,GAAG,CAAEd,MAAM,CAACO,KAAK,CAACO,GAAP,CAAN,CAAkBD,MAAlB,EAFY,CAGjBE,KAAK,CAAER,KAAK,CAACQ,KAHI,CAArB,EAKH,CAPD,CALuB,QAcRC,CAAAA,cAdQ,sJAcvB,iBAA8BC,IAA9B,wIACUlB,CAAAA,KAAK,CAACmB,IAAN,CAAW,4BAAX,CAAyCD,IAAI,CAACV,KAA9C,CADV,uDAduB,yDAkBRY,CAAAA,cAlBQ,uJAkBvB,kBAA8BF,IAA9B,0JAC2BlB,CAAAA,KAAK,CAACqB,GAAN,CAAU,kCAAkCpB,MAAM,CAACiB,IAAI,CAACL,KAAN,CAAN,CAAmBS,WAAnB,EAAlC,CAAmE,OAAnE,CAA2ErB,MAAM,CAACiB,IAAI,CAACH,GAAN,CAAN,CAAiBO,WAAjB,EAArF,CAD3B,QACUC,QADV,gBAEQlB,SAAS,CAACkB,QAAQ,CAACL,IAAV,CAAT,CAFR,wDAlBuB,iDAuBvB,mBACI,wCACI,eAAQ,OAAO,CAAE,yBAAMf,CAAAA,YAAY,CAAC,IAAD,CAAlB,EAAjB,uBADJ,cAGA,YAAK,KAAK,CAAE,CAACqB,QAAQ,CAAE,UAAX,CAAuBC,MAAM,CAAE,CAA/B,CAAZ,uBACI,KAAC,YAAD,EACA,GAAG,CAAEnB,WADL,CAEA,MAAM,CAAEF,MAFR,CAGI,OAAO,CAAE,CAAEN,aAAF,CAHb,CAII,WAAW,CAAC,cAJhB,CAKI,QAAQ,CAAE,kBAAAU,KAAK,QAAIS,CAAAA,cAAc,CAACT,KAAD,CAAlB,EALnB,CAMI,QAAQ,CAAE,kBAACkB,IAAD,QAAUN,CAAAA,cAAc,CAACM,IAAD,CAAxB,EANd,EADJ,EAHA,cAcI,KAAC,aAAD,EACA,MAAM,CAAExB,SADR,CAEA,OAAO,CAAE,yBAAMC,CAAAA,YAAY,CAAC,KAAD,CAAlB,EAFT,CAGA,YAAY,CAAE,sBAAAK,KAAK,QAAID,CAAAA,aAAY,CAACC,KAAD,CAAhB,EAHnB,EAdJ,GADJ,CAsBH","sourcesContent":["/* eslint-disable import/no-anonymous-default-export */\r\nimport React, { useRef, useState } from 'react';\r\nimport FullCalendar from '@fullcalendar/react'; // must go before plugins\r\nimport dayGridPlugin from '@fullcalendar/daygrid'; // a plugin!\r\nimport AddEventModal from './AddEventModal';\r\nimport axios from \"axios\";\r\nimport moment from 'moment';\r\n\r\nexport default function () {\r\n    const [modalOpen, setModalOpen] = useState(false);\r\n    const [events, setEvents] = useState([]);\r\n    const calendarRef = useRef(null);\r\n\r\n    const onEventAdded = event => {\r\n        let calendarApi = calendarRef.current.getApi()\r\n        calendarApi.addEvent({\r\n            start: moment(event.start).toDate(),\r\n            end: moment(event.end).toDate(),\r\n            title: event.title\r\n        });\r\n    };\r\n\r\n    async function handleEventAdd(data) {\r\n        await axios.post(\"/api/calendar/create-event\", data.event);\r\n    }\r\n\r\n    async function handleDatesSet(data) {\r\n        const response = await axios.get(\"/api/calendar/get-events?start=\"+moment(data.start).toISOString()+\"&end=\"+moment(data.end).toISOString())\r\n            setEvents(response.data);\r\n    }\r\n\r\n    return (\r\n        <section>\r\n            <button onClick={() => setModalOpen(true)}>Add Event</button>\r\n            \r\n        <div style={{position: \"relative\", zIndex: 0}}>\r\n            <FullCalendar\r\n            ref={calendarRef}\r\n            events={events}\r\n                plugins={[ dayGridPlugin ]}\r\n                initialView=\"dayGridMonth\"\r\n                eventAdd={event => handleEventAdd(event)}\r\n                datesSet={(date) => handleDatesSet(date)}\r\n                />\r\n        </div>\r\n\r\n            <AddEventModal \r\n            isOpen={modalOpen} \r\n            onClose={() => setModalOpen(false)} \r\n            onEventAdded={event => onEventAdded(event)}\r\n            />\r\n        </section>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}